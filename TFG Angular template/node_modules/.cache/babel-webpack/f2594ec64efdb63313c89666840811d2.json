{"ast":null,"code":"'use strict';\n\nvar NodeHTTPParser = process.binding('http_parser').HTTPParser,\n    version = NodeHTTPParser.RESPONSE ? 6 : 4;\n\nvar HttpParser = function HttpParser(type) {\n  if (type === 'request') this._parser = new NodeHTTPParser(NodeHTTPParser.REQUEST || 'request');else this._parser = new NodeHTTPParser(NodeHTTPParser.RESPONSE || 'response');\n  this._type = type;\n  this._complete = false;\n  this.headers = {};\n  var current = null,\n      self = this;\n\n  this._parser.onHeaderField = function (b, start, length) {\n    current = b.toString('utf8', start, start + length).toLowerCase();\n  };\n\n  this._parser.onHeaderValue = function (b, start, length) {\n    var value = b.toString('utf8', start, start + length);\n    if (self.headers.hasOwnProperty(current)) self.headers[current] += ', ' + value;else self.headers[current] = value;\n  };\n\n  this._parser.onHeadersComplete = this._parser[NodeHTTPParser.kOnHeadersComplete] = function (majorVersion, minorVersion, headers, method, pathname, statusCode) {\n    var info = arguments[0];\n\n    if (typeof info === 'object') {\n      method = info.method;\n      pathname = info.url;\n      statusCode = info.statusCode;\n      headers = info.headers;\n    }\n\n    self.method = typeof method === 'number' ? HttpParser.METHODS[method] : method;\n    self.statusCode = statusCode;\n    self.url = pathname;\n    if (!headers) return;\n\n    for (var i = 0, n = headers.length, key, value; i < n; i += 2) {\n      key = headers[i].toLowerCase();\n      value = headers[i + 1];\n      if (self.headers.hasOwnProperty(key)) self.headers[key] += ', ' + value;else self.headers[key] = value;\n    }\n\n    self._complete = true;\n  };\n};\n\nHttpParser.METHODS = {\n  0: 'DELETE',\n  1: 'GET',\n  2: 'HEAD',\n  3: 'POST',\n  4: 'PUT',\n  5: 'CONNECT',\n  6: 'OPTIONS',\n  7: 'TRACE',\n  8: 'COPY',\n  9: 'LOCK',\n  10: 'MKCOL',\n  11: 'MOVE',\n  12: 'PROPFIND',\n  13: 'PROPPATCH',\n  14: 'SEARCH',\n  15: 'UNLOCK',\n  16: 'REPORT',\n  17: 'MKACTIVITY',\n  18: 'CHECKOUT',\n  19: 'MERGE',\n  24: 'PATCH'\n};\n\nHttpParser.prototype.isComplete = function () {\n  return this._complete;\n};\n\nHttpParser.prototype.parse = function (chunk) {\n  var offset = version < 6 ? 1 : 0,\n      consumed = this._parser.execute(chunk, 0, chunk.length) + offset;\n  if (this._complete) this.body = consumed < chunk.length ? chunk.slice(consumed) : new Buffer(0);\n};\n\nmodule.exports = HttpParser;","map":{"version":3,"sources":["/home/juanma/Documentos/TecladoVirtual/TFG Angular template/node_modules/websocket-driver/lib/websocket/http_parser.js"],"names":["NodeHTTPParser","process","binding","HTTPParser","version","RESPONSE","HttpParser","type","_parser","REQUEST","_type","_complete","headers","current","self","onHeaderField","b","start","length","toString","toLowerCase","onHeaderValue","value","hasOwnProperty","onHeadersComplete","kOnHeadersComplete","majorVersion","minorVersion","method","pathname","statusCode","info","arguments","url","METHODS","i","n","key","prototype","isComplete","parse","chunk","offset","consumed","execute","body","slice","Buffer","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar NodeHTTPParser = process.binding('http_parser').HTTPParser,\n    version        = NodeHTTPParser.RESPONSE ? 6 : 4;\n\nvar HttpParser = function(type) {\n  if (type === 'request')\n    this._parser = new NodeHTTPParser(NodeHTTPParser.REQUEST || 'request');\n  else\n    this._parser = new NodeHTTPParser(NodeHTTPParser.RESPONSE || 'response');\n\n  this._type     = type;\n  this._complete = false;\n  this.headers   = {};\n\n  var current = null,\n      self    = this;\n\n  this._parser.onHeaderField = function(b, start, length) {\n    current = b.toString('utf8', start, start + length).toLowerCase();\n  };\n\n  this._parser.onHeaderValue = function(b, start, length) {\n    var value = b.toString('utf8', start, start + length);\n\n    if (self.headers.hasOwnProperty(current))\n      self.headers[current] += ', ' + value;\n    else\n      self.headers[current] = value;\n  };\n\n  this._parser.onHeadersComplete = this._parser[NodeHTTPParser.kOnHeadersComplete] =\n  function(majorVersion, minorVersion, headers, method, pathname, statusCode) {\n    var info = arguments[0];\n\n    if (typeof info === 'object') {\n      method     = info.method;\n      pathname   = info.url;\n      statusCode = info.statusCode;\n      headers    = info.headers;\n    }\n\n    self.method     = (typeof method === 'number') ? HttpParser.METHODS[method] : method;\n    self.statusCode = statusCode;\n    self.url        = pathname;\n\n    if (!headers) return;\n\n    for (var i = 0, n = headers.length, key, value; i < n; i += 2) {\n      key   = headers[i].toLowerCase();\n      value = headers[i+1];\n      if (self.headers.hasOwnProperty(key))\n        self.headers[key] += ', ' + value;\n      else\n        self.headers[key] = value;\n    }\n\n    self._complete = true;\n  };\n};\n\nHttpParser.METHODS = {\n  0:  'DELETE',\n  1:  'GET',\n  2:  'HEAD',\n  3:  'POST',\n  4:  'PUT',\n  5:  'CONNECT',\n  6:  'OPTIONS',\n  7:  'TRACE',\n  8:  'COPY',\n  9:  'LOCK',\n  10: 'MKCOL',\n  11: 'MOVE',\n  12: 'PROPFIND',\n  13: 'PROPPATCH',\n  14: 'SEARCH',\n  15: 'UNLOCK',\n  16: 'REPORT',\n  17: 'MKACTIVITY',\n  18: 'CHECKOUT',\n  19: 'MERGE',\n  24: 'PATCH'\n};\n\nHttpParser.prototype.isComplete = function() {\n  return this._complete;\n};\n\nHttpParser.prototype.parse = function(chunk) {\n  var offset   = (version < 6) ? 1 : 0,\n      consumed = this._parser.execute(chunk, 0, chunk.length) + offset;\n\n  if (this._complete)\n    this.body = (consumed < chunk.length)\n              ? chunk.slice(consumed)\n              : new Buffer(0);\n};\n\nmodule.exports = HttpParser;\n"]},"metadata":{},"sourceType":"script"}