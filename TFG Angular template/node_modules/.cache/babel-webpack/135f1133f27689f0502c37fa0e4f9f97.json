{"ast":null,"code":"import _regeneratorRuntime from \"/home/juanma/Documentos/TecladoVirtual/TFG Angular template/node_modules/@babel/runtime/regenerator\";\n\n/*!\n* rete-vue-render-plugin v0.5.1 \n* (c) 2021 Vitaliy Stoliarov \n* Released under the MIT license.\n*/\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n  return css;\n}\n\nimport Vue from 'vue';\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nVue.filter('kebab', function (str) {\n  var replace = function replace(s) {\n    return s.toLowerCase().replace(/ /g, '-');\n  };\n\n  return Array.isArray(str) ? str.map(replace) : replace(str);\n});\nvar mixin = {\n  props: ['node', 'editor', 'bindSocket', 'bindControl'],\n  methods: {\n    inputs: function inputs() {\n      return Array.from(this.node.inputs.values());\n    },\n    outputs: function outputs() {\n      return Array.from(this.node.outputs.values());\n    },\n    controls: function controls() {\n      return Array.from(this.node.controls.values());\n    },\n    selected: function selected() {\n      return this.editor.selected.contains(this.node) ? 'selected' : '';\n    }\n  },\n  directives: {\n    socket: {\n      bind: function bind(el, binding, vnode) {\n        vnode.context.bindSocket(el, binding.arg, binding.value);\n      },\n      update: function update(el, binding, vnode) {\n        vnode.context.bindSocket(el, binding.arg, binding.value);\n      }\n    },\n    control: {\n      bind: function bind(el, binding, vnode) {\n        if (!binding.value) return;\n        vnode.context.bindControl(el, binding.value);\n      }\n    }\n  }\n}; //\n//\n//\n//\n//\n//\n//\n\nvar script = {\n  props: ['type', 'socket']\n};\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nvar normalizeComponent_1 = normalizeComponent;\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\n\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\n\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n      if (css.media) style.element.setAttribute('media', css.media);\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n      if (nodes[index]) style.element.removeChild(nodes[index]);\n      if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n    }\n  }\n}\n\nvar browser = createInjector;\n/* script */\n\nvar __vue_script__ = script;\n/* template */\n\nvar __vue_render__ = function __vue_render__() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _c(\"div\", {\n    staticClass: \"socket\",\n    class: _vm._f(\"kebab\")([_vm.type, _vm.socket.name]),\n    attrs: {\n      title: _vm.socket.name\n    }\n  });\n};\n\nvar __vue_staticRenderFns__ = [];\n__vue_render__._withStripped = true;\n/* style */\n\nvar __vue_inject_styles__ = function __vue_inject_styles__(inject) {\n  if (!inject) return;\n  inject(\"data-v-4e9e4dac_0\", {\n    source: \".socket[data-v-4e9e4dac] {\\n  display: inline-block;\\n  cursor: pointer;\\n  border: 1px solid white;\\n  border-radius: 12px;\\n  width: 24px;\\n  height: 24px;\\n  margin: 6px;\\n  vertical-align: middle;\\n  background: #96b38a;\\n  z-index: 2;\\n  box-sizing: border-box;\\n}\\n.socket[data-v-4e9e4dac]:hover {\\n    border-width: 4px;\\n}\\n.socket.multiple[data-v-4e9e4dac] {\\n    border-color: yellow;\\n}\\n.socket.output[data-v-4e9e4dac] {\\n    margin-right: -12px;\\n}\\n.socket.input[data-v-4e9e4dac] {\\n    margin-left: -12px;\\n}\\n\\n/*# sourceMappingURL=Socket.vue.map */\",\n    map: {\n      \"version\": 3,\n      \"sources\": [\"/mnt/d/Workflow/retejs/vue-render-plugin/src/Socket.vue\", \"Socket.vue\"],\n      \"names\": [],\n      \"mappings\": \"AAgBA;EACA,qBAAA;EACA,eAAA;EACA,uBAAA;EACA,mBAAA;EACA,WAAA;EACA,YAAA;EACA,WAAA;EACA,sBAAA;EACA,mBAAA;EACA,UAAA;EACA,sBAAA;AAAA;AAXA;IAaA,iBAAA;AAAA;AAbA;IAeA,oBAAA;AAAA;AAfA;IAiBA,mBAAA;AAAA;AAjBA;IAmBA,kBAAA;AAAA;;ACdA,qCAAqC\",\n      \"file\": \"Socket.vue\",\n      \"sourcesContent\": [\"<template lang=\\\"pug\\\">\\n.socket(\\n  :class=\\\"[type, socket.name] | kebab\\\",\\n  :title=\\\"socket.name\\\"\\n)\\n</template>\\n\\n<script>\\nexport default {\\n  props: ['type', 'socket']\\n}\\n</script>\\n\\n<style lang=\\\"sass\\\" scoped>\\n@import \\\"./vars\\\"\\n\\n.socket\\n  display: inline-block\\n  cursor: pointer\\n  border: 1px solid white\\n  border-radius: $socket-size/2.0\\n  width: $socket-size\\n  height: $socket-size\\n  margin: $socket-margin\\n  vertical-align: middle\\n  background: $socket-color\\n  z-index: 2\\n  box-sizing: border-box\\n  &:hover\\n    border-width: 4px\\n  &.multiple\\n    border-color: yellow\\n  &.output\\n    margin-right: - $socket-size / 2\\n  &.input\\n    margin-left: - $socket-size / 2\\n</style>\\n\", \".socket {\\n  display: inline-block;\\n  cursor: pointer;\\n  border: 1px solid white;\\n  border-radius: 12px;\\n  width: 24px;\\n  height: 24px;\\n  margin: 6px;\\n  vertical-align: middle;\\n  background: #96b38a;\\n  z-index: 2;\\n  box-sizing: border-box; }\\n  .socket:hover {\\n    border-width: 4px; }\\n  .socket.multiple {\\n    border-color: yellow; }\\n  .socket.output {\\n    margin-right: -12px; }\\n  .socket.input {\\n    margin-left: -12px; }\\n\\n/*# sourceMappingURL=Socket.vue.map */\"]\n    },\n    media: undefined\n  });\n};\n/* scoped */\n\n\nvar __vue_scope_id__ = \"data-v-4e9e4dac\";\n/* module identifier */\n\nvar __vue_module_identifier__ = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__ = false;\n/* style inject SSR */\n\nvar Socket = normalizeComponent_1({\n  render: __vue_render__,\n  staticRenderFns: __vue_staticRenderFns__\n}, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, browser, undefined); //\n\nvar script$1 = {\n  mixins: [mixin],\n  components: {\n    Socket: Socket\n  }\n};\n/* script */\n\nvar __vue_script__$1 = script$1;\n/* template */\n\nvar __vue_render__$1 = function __vue_render__$1() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _c(\"div\", {\n    staticClass: \"node\",\n    class: _vm._f(\"kebab\")([_vm.selected(), _vm.node.name])\n  }, [_c(\"div\", {\n    staticClass: \"title\"\n  }, [_vm._v(_vm._s(_vm.node.name))]), _vm._l(_vm.outputs(), function (output) {\n    return _c(\"div\", {\n      key: output.key,\n      staticClass: \"output\"\n    }, [_c(\"div\", {\n      staticClass: \"output-title\"\n    }, [_vm._v(_vm._s(output.name))]), _c(\"Socket\", {\n      directives: [{\n        name: \"socket\",\n        rawName: \"v-socket:output\",\n        value: output,\n        expression: \"output\",\n        arg: \"output\"\n      }],\n      attrs: {\n        type: \"output\",\n        socket: output.socket\n      }\n    })], 1);\n  }), _vm._l(_vm.controls(), function (control) {\n    return _c(\"div\", {\n      directives: [{\n        name: \"control\",\n        rawName: \"v-control\",\n        value: control,\n        expression: \"control\"\n      }],\n      key: control.key,\n      staticClass: \"control\"\n    });\n  }), _vm._l(_vm.inputs(), function (input) {\n    return _c(\"div\", {\n      key: input.key,\n      staticClass: \"input\"\n    }, [_c(\"Socket\", {\n      directives: [{\n        name: \"socket\",\n        rawName: \"v-socket:input\",\n        value: input,\n        expression: \"input\",\n        arg: \"input\"\n      }],\n      attrs: {\n        type: \"input\",\n        socket: input.socket\n      }\n    }), _c(\"div\", {\n      directives: [{\n        name: \"show\",\n        rawName: \"v-show\",\n        value: !input.showControl(),\n        expression: \"!input.showControl()\"\n      }],\n      staticClass: \"input-title\"\n    }, [_vm._v(_vm._s(input.name))]), _c(\"div\", {\n      directives: [{\n        name: \"show\",\n        rawName: \"v-show\",\n        value: input.showControl(),\n        expression: \"input.showControl()\"\n      }, {\n        name: \"control\",\n        rawName: \"v-control\",\n        value: input.control,\n        expression: \"input.control\"\n      }],\n      staticClass: \"input-control\"\n    })], 1);\n  })], 2);\n};\n\nvar __vue_staticRenderFns__$1 = [];\n__vue_render__$1._withStripped = true;\n/* style */\n\nvar __vue_inject_styles__$1 = function __vue_inject_styles__$1(inject) {\n  if (!inject) return;\n  inject(\"data-v-e72fec68_0\", {\n    source: \".node[data-v-e72fec68] {\\n  background: rgba(110, 136, 255, 0.8);\\n  border: 2px solid #4e58bf;\\n  border-radius: 10px;\\n  cursor: pointer;\\n  min-width: 180px;\\n  height: auto;\\n  padding-bottom: 6px;\\n  box-sizing: content-box;\\n  position: relative;\\n  user-select: none;\\n}\\n.node[data-v-e72fec68]:hover {\\n    background: rgba(130, 153, 255, 0.8);\\n}\\n.node.selected[data-v-e72fec68] {\\n    background: #ffd92c;\\n    border-color: #e3c000;\\n}\\n.node .title[data-v-e72fec68] {\\n    color: white;\\n    font-family: sans-serif;\\n    font-size: 18px;\\n    padding: 8px;\\n}\\n.node .output[data-v-e72fec68] {\\n    text-align: right;\\n}\\n.node .input[data-v-e72fec68] {\\n    text-align: left;\\n}\\n.node .input-title[data-v-e72fec68], .node .output-title[data-v-e72fec68] {\\n    vertical-align: middle;\\n    color: white;\\n    display: inline-block;\\n    font-family: sans-serif;\\n    font-size: 14px;\\n    margin: 6px;\\n    line-height: 24px;\\n}\\n.node .input-control[data-v-e72fec68] {\\n    z-index: 1;\\n    width: calc(100% - 36px);\\n    vertical-align: middle;\\n    display: inline-block;\\n}\\n.node .control[data-v-e72fec68] {\\n    padding: 6px 18px;\\n}\\n\\n/*# sourceMappingURL=Node.vue.map */\",\n    map: {\n      \"version\": 3,\n      \"sources\": [\"/mnt/d/Workflow/retejs/vue-render-plugin/src/Node.vue\", \"Node.vue\"],\n      \"names\": [],\n      \"mappings\": \"AAyCA;EACA,oCAAA;EACA,yBAAA;EACA,mBAAA;EACA,eAAA;EACA,gBAAA;EACA,YAAA;EACA,mBAAA;EACA,uBAAA;EACA,kBAAA;EACA,iBAAA;AAAA;AAVA;IAYA,oCAAA;AAAA;AAZA;IAcA,mBAAA;IACA,qBAAA;AAAA;AAfA;IAiBA,YAAA;IACA,uBAAA;IACA,eAAA;IACA,YAAA;AAAA;AApBA;IAsBA,iBAAA;AAAA;AAtBA;IAwBA,gBAAA;AAAA;AAxBA;IA0BA,sBAAA;IACA,YAAA;IACA,qBAAA;IACA,uBAAA;IACA,eAAA;IACA,WAAA;IACA,iBAAA;AAAA;AAhCA;IAkCA,UAAA;IACA,wBAAA;IACA,sBAAA;IACA,qBAAA;AAAA;AArCA;IAuCA,iBAAA;AAAA;;ACvCA,mCAAmC\",\n      \"file\": \"Node.vue\",\n      \"sourcesContent\": [\"<template lang=\\\"pug\\\">\\n.node(:class=\\\"[selected(), node.name] | kebab\\\")\\n  .title {{node.name}}\\n\\n  // Outputs\\n  .output(v-for='output in outputs()' :key=\\\"output.key\\\")\\n    .output-title {{output.name}}\\n    Socket(v-socket:output=\\\"output\\\", type=\\\"output\\\", :socket=\\\"output.socket\\\")\\n\\n  // Controls\\n  .control(\\n    v-for='control in controls()',\\n    :key=\\\"control.key\\\",\\n    v-control=\\\"control\\\"\\n  )\\n\\n  // Inputs\\n  .input(v-for='input in inputs()' :key=\\\"input.key\\\")\\n    Socket(v-socket:input=\\\"input\\\", type=\\\"input\\\", :socket=\\\"input.socket\\\")\\n    .input-title(v-show='!input.showControl()') {{input.name}}\\n    .input-control(\\n      v-show='input.showControl()'\\n      v-control=\\\"input.control\\\"\\n    )\\n</template>\\n\\n<script>\\nimport mixin from './mixin';\\nimport Socket from './Socket.vue';\\n\\nexport default {\\n  mixins: [mixin],\\n  components: {\\n    Socket\\n  }\\n}\\n</script>\\n\\n<style lang=\\\"sass\\\" scoped>\\n@import \\\"./vars\\\"\\n\\n.node\\n  background: $node-color\\n  border: 2px solid #4e58bf\\n  border-radius: 10px\\n  cursor: pointer\\n  min-width: $node-width\\n  height: auto\\n  padding-bottom: 6px\\n  box-sizing: content-box\\n  position: relative\\n  user-select: none\\n  &:hover\\n    background: lighten($node-color,4%)\\n  &.selected\\n    background: $node-color-selected\\n    border-color: #e3c000\\n  .title\\n    color: white\\n    font-family: sans-serif\\n    font-size: 18px\\n    padding: 8px\\n  .output\\n    text-align: right\\n  .input\\n    text-align: left\\n  .input-title,.output-title\\n    vertical-align: middle\\n    color: white\\n    display: inline-block\\n    font-family: sans-serif\\n    font-size: 14px\\n    margin: $socket-margin\\n    line-height: $socket-size\\n  .input-control\\n    z-index: 1\\n    width: calc(100% - #{$socket-size + 2*$socket-margin})\\n    vertical-align: middle\\n    display: inline-block\\n  .control\\n    padding: $socket-margin $socket-size/2 + $socket-margin\\n</style>\", \".node {\\n  background: rgba(110, 136, 255, 0.8);\\n  border: 2px solid #4e58bf;\\n  border-radius: 10px;\\n  cursor: pointer;\\n  min-width: 180px;\\n  height: auto;\\n  padding-bottom: 6px;\\n  box-sizing: content-box;\\n  position: relative;\\n  user-select: none; }\\n  .node:hover {\\n    background: rgba(130, 153, 255, 0.8); }\\n  .node.selected {\\n    background: #ffd92c;\\n    border-color: #e3c000; }\\n  .node .title {\\n    color: white;\\n    font-family: sans-serif;\\n    font-size: 18px;\\n    padding: 8px; }\\n  .node .output {\\n    text-align: right; }\\n  .node .input {\\n    text-align: left; }\\n  .node .input-title, .node .output-title {\\n    vertical-align: middle;\\n    color: white;\\n    display: inline-block;\\n    font-family: sans-serif;\\n    font-size: 14px;\\n    margin: 6px;\\n    line-height: 24px; }\\n  .node .input-control {\\n    z-index: 1;\\n    width: calc(100% - 36px);\\n    vertical-align: middle;\\n    display: inline-block; }\\n  .node .control {\\n    padding: 6px 18px; }\\n\\n/*# sourceMappingURL=Node.vue.map */\"]\n    },\n    media: undefined\n  });\n};\n/* scoped */\n\n\nvar __vue_scope_id__$1 = \"data-v-e72fec68\";\n/* module identifier */\n\nvar __vue_module_identifier__$1 = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__$1 = false;\n/* style inject SSR */\n\nvar Node = normalizeComponent_1({\n  render: __vue_render__$1,\n  staticRenderFns: __vue_staticRenderFns__$1\n}, __vue_inject_styles__$1, __vue_script__$1, __vue_scope_id__$1, __vue_is_functional_template__$1, __vue_module_identifier__$1, browser, undefined);\n\nfunction createVue(el, vueComponent, vueProps) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var app = new Vue(_objectSpread({\n    render: function render(h) {\n      return h(vueComponent, {\n        props: vueProps\n      });\n    }\n  }, options));\n  var nodeEl = document.createElement('div');\n  el.appendChild(nodeEl);\n  app.$mount(nodeEl);\n  return app;\n}\n\nfunction createNode(editor, CommonVueComponent, _ref, options) {\n  var el = _ref.el,\n      node = _ref.node,\n      component = _ref.component,\n      bindSocket = _ref.bindSocket,\n      bindControl = _ref.bindControl;\n  var vueComponent = component.component || CommonVueComponent || Node;\n\n  var vueProps = _objectSpread({}, component.props, {\n    node: node,\n    editor: editor,\n    bindSocket: bindSocket,\n    bindControl: bindControl\n  });\n\n  var app = createVue(el, vueComponent, vueProps, options);\n  node.vueContext = app.$children[0];\n  return app;\n}\n\nfunction createControl(editor, _ref2, options) {\n  var el = _ref2.el,\n      control = _ref2.control;\n  var vueComponent = control.component;\n\n  var vueProps = _objectSpread({}, control.props, {\n    getData: control.getData.bind(control),\n    putData: control.putData.bind(control)\n  });\n\n  var app = createVue(el, vueComponent, vueProps, options);\n  control.vueContext = app.$children[0];\n  return app;\n}\n\nvar update = function update(entity) {\n  return new Promise(function (res) {\n    if (!entity.vueContext) return res();\n    entity.vueContext.$forceUpdate();\n    entity.vueContext.$nextTick(res);\n  });\n};\n\nfunction install(editor, _ref3) {\n  var CommonVueComponent = _ref3.component,\n      options = _ref3.options;\n  editor.on('rendernode', function (_ref4) {\n    var el = _ref4.el,\n        node = _ref4.node,\n        component = _ref4.component,\n        bindSocket = _ref4.bindSocket,\n        bindControl = _ref4.bindControl;\n    if (component.render && component.render !== 'vue') return;\n    node._vue = createNode(editor, CommonVueComponent, {\n      el: el,\n      node: node,\n      component: component,\n      bindSocket: bindSocket,\n      bindControl: bindControl\n    }, options);\n    node.update = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return update(node);\n\n            case 2:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  });\n  editor.on('rendercontrol', function (_ref6) {\n    var el = _ref6.el,\n        control = _ref6.control;\n    if (control.render && control.render !== 'vue') return;\n    control._vue = createControl(editor, {\n      el: el,\n      control: control\n    }, options);\n    control.update = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return update(control);\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n  });\n  editor.on('connectioncreated connectionremoved', function (connection) {\n    update(connection.output.node);\n    update(connection.input.node);\n  });\n  editor.on('nodeselected', function () {\n    editor.nodes.map(update);\n  });\n}\n\nvar index = {\n  name: 'vue-render',\n  install: install,\n  mixin: mixin,\n  Node: Node,\n  Socket: Socket\n};\nexport default index;","map":{"version":3,"sources":["../src/filters.js","../src/mixin.js","../src/Socket.vue","../node_modules/vue-runtime-helpers/dist/normalize-component.js","../node_modules/vue-runtime-helpers/dist/inject-style/browser.js","../src/Node.vue","../src/index.js"],"names":["Vue","replace","s","Array","str","props","methods","inputs","outputs","controls","selected","directives","socket","bind","vnode","binding","update","control","options","app","render","h","vueProps","nodeEl","document","el","node","component","bindSocket","bindControl","vueComponent","editor","createVue","getData","putData","entity","res","CommonVueComponent","createNode","createControl","connection","name","install","mixin","Node","Socket"],"mappings":"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","sourcesContent":["import Vue from 'vue';\n\nVue.filter('kebab', (str) => {\n    const replace = s =>  s.toLowerCase().replace(/ /g, '-');\n\n    return Array.isArray(str) ?  str.map(replace) : replace(str);\n});","export default {\n    props: ['node', 'editor', 'bindSocket', 'bindControl'],\n    methods: {\n        inputs() {\n            return Array.from(this.node.inputs.values())\n        },\n        outputs() {\n            return Array.from(this.node.outputs.values())\n        },\n        controls() {\n            return Array.from(this.node.controls.values())\n        },\n        selected() {\n            return this.editor.selected.contains(this.node) ? 'selected' : '';\n        }\n    },\n    directives: {\n        socket: {\n            bind(el, binding, vnode) {\n                vnode.context.bindSocket(el, binding.arg, binding.value);\n            },\n            update(el, binding, vnode) {\n                vnode.context.bindSocket(el, binding.arg, binding.value);\n            }\n        },\n        control: {\n            bind(el, binding, vnode) {\n                if (!binding.value) return;\n\n                vnode.context.bindControl(el, binding.value);\n            }\n        }\n    }\n}","<template lang=\"pug\">\n.socket(\n  :class=\"[type, socket.name] | kebab\",\n  :title=\"socket.name\"\n)\n</template>\n\n<script>\nexport default {\n  props: ['type', 'socket']\n}\n</script>\n\n<style lang=\"sass\" scoped>\n@import \"./vars\"\n\n.socket\n  display: inline-block\n  cursor: pointer\n  border: 1px solid white\n  border-radius: $socket-size/2.0\n  width: $socket-size\n  height: $socket-size\n  margin: $socket-margin\n  vertical-align: middle\n  background: $socket-color\n  z-index: 2\n  box-sizing: border-box\n  &:hover\n    border-width: 4px\n  &.multiple\n    border-color: yellow\n  &.output\n    margin-right: - $socket-size / 2\n  &.input\n    margin-left: - $socket-size / 2\n</style>\n","'use strict';\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nmodule.exports = normalizeComponent;\n//# sourceMappingURL=normalize-component.js.map\n","'use strict';\n\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n      if (css.media) style.element.setAttribute('media', css.media);\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n      if (nodes[index]) style.element.removeChild(nodes[index]);\n      if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n    }\n  }\n}\n\nmodule.exports = createInjector;\n//# sourceMappingURL=browser.js.map\n","<template lang=\"pug\">\n.node(:class=\"[selected(), node.name] | kebab\")\n  .title {{node.name}}\n\n  // Outputs\n  .output(v-for='output in outputs()' :key=\"output.key\")\n    .output-title {{output.name}}\n    Socket(v-socket:output=\"output\", type=\"output\", :socket=\"output.socket\")\n\n  // Controls\n  .control(\n    v-for='control in controls()',\n    :key=\"control.key\",\n    v-control=\"control\"\n  )\n\n  // Inputs\n  .input(v-for='input in inputs()' :key=\"input.key\")\n    Socket(v-socket:input=\"input\", type=\"input\", :socket=\"input.socket\")\n    .input-title(v-show='!input.showControl()') {{input.name}}\n    .input-control(\n      v-show='input.showControl()'\n      v-control=\"input.control\"\n    )\n</template>\n\n<script>\nimport mixin from './mixin';\nimport Socket from './Socket.vue';\n\nexport default {\n  mixins: [mixin],\n  components: {\n    Socket\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n@import \"./vars\"\n\n.node\n  background: $node-color\n  border: 2px solid #4e58bf\n  border-radius: 10px\n  cursor: pointer\n  min-width: $node-width\n  height: auto\n  padding-bottom: 6px\n  box-sizing: content-box\n  position: relative\n  user-select: none\n  &:hover\n    background: lighten($node-color,4%)\n  &.selected\n    background: $node-color-selected\n    border-color: #e3c000\n  .title\n    color: white\n    font-family: sans-serif\n    font-size: 18px\n    padding: 8px\n  .output\n    text-align: right\n  .input\n    text-align: left\n  .input-title,.output-title\n    vertical-align: middle\n    color: white\n    display: inline-block\n    font-family: sans-serif\n    font-size: 14px\n    margin: $socket-margin\n    line-height: $socket-size\n  .input-control\n    z-index: 1\n    width: calc(100% - #{$socket-size + 2*$socket-margin})\n    vertical-align: middle\n    display: inline-block\n  .control\n    padding: $socket-margin $socket-size/2 + $socket-margin\n</style>","import './filters';\nimport Node from './Node.vue';\nimport Socket from './Socket.vue';\nimport Vue from 'vue';\nimport mixin from './mixin';\n\nfunction createVue(el, vueComponent, vueProps, options = {}) {\n    const app = new Vue({\n        render: h => h(vueComponent, { props: vueProps }),\n        ...options\n    });\n\n    const nodeEl = document.createElement('div');\n\n    el.appendChild(nodeEl);\n    app.$mount(nodeEl);\n    \n    return app;\n}\n\nfunction createNode(editor, CommonVueComponent, { el, node, component, bindSocket, bindControl }, options) {\n    const vueComponent = component.component || CommonVueComponent || Node;\n    const vueProps = { ...component.props, node, editor, bindSocket, bindControl };\n    const app = createVue(el, vueComponent, vueProps, options);\n\n    node.vueContext = app.$children[0];\n\n    return app;\n}\n\nfunction createControl(editor, { el, control }, options) {\n    const vueComponent = control.component;\n    const vueProps = { ...control.props, getData: control.getData.bind(control), putData: control.putData.bind(control) };\n    const app = createVue(el, vueComponent, vueProps, options);\n\n    control.vueContext = app.$children[0];\n\n    return app;\n}\n\nconst update = (entity) => {\n    return new Promise((res) => {\n        if (!entity.vueContext) return res();\n\n        entity.vueContext.$forceUpdate();\n        entity.vueContext.$nextTick(res);\n    });\n}\n\nfunction install(editor, { component: CommonVueComponent, options }) {\n    editor.on('rendernode', ({ el, node, component, bindSocket, bindControl }) => {\n        if (component.render && component.render !== 'vue') return;\n        node._vue = createNode(editor, CommonVueComponent, { el, node, component, bindSocket, bindControl }, options);\n        node.update = async () => await update(node);\n    });\n\n    editor.on('rendercontrol', ({ el, control }) => {\n        if (control.render && control.render !== 'vue') return;\n        control._vue = createControl(editor, { el, control }, options);\n        control.update = async () => await update(control)\n    });\n\n    editor.on('connectioncreated connectionremoved', connection => {\n        update(connection.output.node)\n        update(connection.input.node)\n    });\n\n    editor.on('nodeselected', () => {\n        editor.nodes.map(update);\n    });\n}\n\nexport default {\n    name: 'vue-render',\n    install,\n    mixin,\n    Node,\n    Socket\n}\n"]},"metadata":{},"sourceType":"module"}